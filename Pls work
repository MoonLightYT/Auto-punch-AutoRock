-- Load Dependencies
local Library = loadstring(game:HttpGet("https://github.com/ActualMasterOogway/Fluent-Renewed/releases/latest/download/Fluent.luau"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/master/Addons/SaveManager.luau"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/master/Addons/InterfaceManager.luau"))()

-- Define the main window
local Window = Library:CreateWindow{
    Title = "MoonHub",
    SubTitle = "By Godlike",
    TabWidth = 125,
    Size = UDim2.fromOffset(972, 820),
    Resize = true,
    MinSize = Vector2.new(470, 380),
    Acrylic = true,
    Theme = "Light",
    MinimizeKey = Enum.KeyCode.RightControl
}

-- Define tabs
local Tabs = {
    Main = Window:AddTab({ Title = "Main", Icon = "0" }),
    AutoWeights = Window:AddTab({ Title = "Auto Weights", Icon = "0" }),
    AutoRebirth = Window:AddTab({ Title = "Auto Rebirth", Icon = "0" }),
    AutoKill = Window:AddTab({ Title = "Auto Kill", Icon = "0" }),
    AutoRock = Window:AddTab({ Title = "Auto Rock", Icon = "0" }),
    FastGlitch = Window:AddTab({ Title = "Fast Glitch", Icon = "0" }),
    OPTools = Window:AddTab({ Title = "OP FUNCTIONSðŸ”¥", Icon = "0" }),
    Misc = Window:AddTab({ Title = "Misc", Icon = "0" })
}

-- Toggle creation for AutoFarm
local Toggle = Tabs.AutoRock:CreateToggle("MuscleKingGymRock", {
    Title = "Farm Muscle King Gym Rock",
    Description = "Farm rocks at Muscle King Gym",
    Default = false,
    Callback = function(Value)
       _G.fastHitActive = false
getgenv().autoFarm = false

function startAutomation(value)
    _G.fastHitActive = value
    getgenv().autoFarm = value

    if value then
        -- Punch Tool Handler
        local function equipAndModifyPunch()
            while _G.fastHitActive do
                local player = game.Players.LocalPlayer
                local punch = player.Backpack:FindFirstChild("Punch")
                if punch then
                    punch.Parent = player.Character
                    if punch:FindFirstChild("attackTime") then
                        punch.attackTime.Value = 0
                    end
                end
                wait()
            end
        end

        -- Rapid Punch Activator
        local function rapidPunch()
            while _G.fastHitActive do
                local player = game.Players.LocalPlayer
                player.muscleEvent:FireServer("punch", "rightHand")
                player.muscleEvent:FireServer("punch", "leftHand")
                local character = player.Character
                if character then
                    local punchTool = character:FindFirstChild("Punch")
                    if punchTool then
                        punchTool:Activate()
                    end
                end
                wait()
            end
        end

        -- Auto Farm Rock Toucher
        local function autoFarmRocks()
            local selectrock = "Tiny Island Rock"
            while getgenv().autoFarm do
                task.wait()
                local player = game.Players.LocalPlayer
                if player.Durability.Value >= 0 then
                    for _, v in pairs(workspace.machinesFolder:GetDescendants()) do
                        if v.Name == "neededDurability" and v.Value == 0 then
                            local character = player.Character
                            if character and character:FindFirstChild("LeftHand") and character:FindFirstChild("RightHand") then
                                local rock = v.Parent:FindFirstChild("Rock")
                                if rock then
                                    firetouchinterest(rock, character.RightHand, 0)
                                    firetouchinterest(rock, character.RightHand, 1)
                                    firetouchinterest(rock, character.LeftHand, 0)
                                    firetouchinterest(rock, character.LeftHand, 1)
                                    gettool()
                                end
                            end
                        end
                    end
                end
            end
        end

        coroutine.wrap(equipAndModifyPunch)()
        coroutine.wrap(rapidPunch)()
        coroutine.wrap(autoFarmRocks)()
    else
        -- Turn off and move punch tool back
        local character = game.Players.LocalPlayer.Character
        local equipped = character:FindFirstChild("Punch")
        if equipped then
            equipped.Parent = game.Players.LocalPlayer.Backpack
        end
    end
end

